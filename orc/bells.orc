sr=44100kr=4410ksmps=10nchnls=2; Risset's instrument design fo a bell-like sound; Based on FIGURE 3.27 FROM DODGE & JERSE, P.94, 1969giampfn ftgen 1, 0, 513, 5, 1024, 512, 1gipartfn ftgen 2, 0, 513, 9, 1, 1, 0gidarknotes[][] init 48,6gidarknotes fillarray \1, 0, 90, 60, 9.01, 4,1, 0, 87, 60, 9.02, 4,1, 0, 84, 60, 8.09, 4,1, 0, 81, 60, 9.04, 4,1, 0, 78, 60, 8.06, 4,1, 0, 75, 60, 9.05, 4,1, 0, 72, 60, 9.06, 4,1, 0, 69, 60, 8.04, 4,1, 0, 66, 60, 9.07, 4,1, 0, 63, 60, 8.01, 4,1, 0, 60, 60, 9.09, 4,1, 0, 57, 60, 6.06, 4,1, 0, 54, 60, 9.10, 4,1, 0, 51, 60, 7.01, 4,1, 0, 48, 60, 9.09, 4,1, 0, 45, 60, 10.05, 4,1, 0, 42, 60, 6.01, 4,1, 0, 39, 60, 10.04, 4,1, 0, 36, 60, 10.06, 4,1, 0, 33, 60, 10.05, 4,1, 0, 30, 60, 10.06, 4,1, 0, 27, 61, 7.06, 4,1, 0, 24, 60, 10.07, 4,1, 0, 21, 61, 8.04, 4,1, 0, 18, 60, 10.09, 4,1, 0, 15, 60, 10.08, 4,1, 0, 15, 61, 8.09, 4,1, 0, 15, 60, 10.09, 4,1, 0, 15, 61, 9.02, 4,1, 0, 15, 60, 10.08, 4,1, 0, 63, 61, 9.01, 4,1, 0, 62, 60, 10.04, 4,1, 0, 61, 60, 7.06, 4,1, 0, 60, 61, 8.01, 4,1, 0, 59, 60, 9.04, 4,1, 0, 58, 61, 10.06, 4,1, 0, 57, 60, 10.07, 4,1, 0, 56, 61, 9.07, 4,1, 0, 55, 60, 9.09, 4gilightnotes[][] init 48,6gilightnotes fillarray \2, 0, 90, 60, 9.01, 4,2, 0, 87, 60, 9.02, 4,2, 0, 84, 60, 8.09, 4,2, 0, 81, 60, 9.04, 4,2, 0, 78, 60, 8.06, 4,2, 0, 75, 60, 9.05, 4,2, 0, 72, 60, 9.06, 4,2, 0, 69, 60, 8.04, 4,2, 0, 66, 60, 9.07, 4,2, 0, 63, 60, 8.01, 4,2, 0, 60, 60, 9.09, 4,2, 0, 57, 60, 6.06, 4,2, 0, 54, 60, 9.10, 4,2, 0, 51, 60, 7.01, 4,2, 0, 48, 60, 9.09, 4,2, 0, 45, 60, 10.05, 4,2, 0, 42, 60, 6.01, 4,2, 0, 39, 60, 10.04, 4,2, 0, 36, 60, 10.06, 4,2, 0, 33, 60, 10.05, 4,2, 0, 30, 60, 10.06, 4,2, 0, 27, 61, 7.06, 4,2, 0, 24, 60, 10.07, 4,2, 0, 21, 61, 8.04, 4,2, 0, 18, 60, 10.09, 4,2, 0, 15, 60, 10.08, 4,2, 0, 15, 61, 8.09, 4,2, 0, 15, 60, 10.09, 4,2, 0, 15, 61, 9.02, 4,2, 0, 15, 60, 10.08, 4,2, 0, 63, 61, 9.01, 4,2, 0, 62, 60, 10.04, 4,2, 0, 61, 60, 7.06, 4,2, 0, 60, 61, 8.01, 4,2, 0, 59, 60, 9.04, 4,2, 0, 58, 61, 10.06, 4,2, 0, 57, 60, 10.07, 4,2, 0, 56, 61, 9.07, 4,2, 0, 55, 60, 9.09, 4;; Dekany Functions;; DEKANY 3 : 1,3,5,9,11;           0           1           2           3           4           5           6           7           8           9           10gidekany3 ftgen 4,0,16,-2, 1.00000000, 1.03125000, 1.12500000, 1.25000000, 1.37500000, 1.40625000, 1.50000000, 1.54687500, 1.68750000, 1.71875000, 1.87500000; 1:   33/32   undecimal comma                   .3. . . .11; 2:    9/8    major whole tone                 1. . . .9.  ; 3:    5/4    major third                      1. .5. . .  ; 4:   11/8    undecimal semi-augmented fourth  1. . . . .11; 5:   45/32   tritone                           . .5. .9.  ; 6:    3/2    perfect fifth                    1.3. . . .  ; 7:   99/64                                     . . . .9.11; 8:   27/16   Pythagorean major sixth           .3. . .9.  ; 9:   55/32                                     . .5. . .11; 10:  15/8    classic major seventh             .3.5. . .  ; DEKANY 4 : 1,3,7,9,11;           0           1           2           3           4           5           6           7           8           9           10gidekany4 ftgen 5,0,16,-2, 1.00000000, 1.03125000, 1.12500000, 1.20312500, 1.31250000, 1.37500000, 1.50000000, 1.54687500, 1.68750000, 1.75000000, 1.96875000; 1:   33/32   undecimal comma                   .3. . . .11; 2:    9/8    major whole tone                 1. . . .9.  ; 3:   77/64                                     . . .7. .11; 4:   21/16   narrow fourth                     .3. .7. .  ; 5:   11/8    undecimal semi-augmented fourth  1. . . . .11; 6:    3/2    perfect fifth                    1.3. . . .  ; 7:   99/64                                     . . . .9.11; 8:   27/16   Pythagorean major sixth           .3. . .9.  ; 9:    7/4    harmonic seventh                 1. . .7. .  ; 10:  63/32   octave - septimal comma           . . .7.9.  ; DEKANY 5 : 1,5,7,9,11;           0           1           2           3           4           5           6           7           8           9           10gidekany5 ftgen 6,0,16,-2, 1.00000000, 1.09375000, 1.12500000, 1.20312500, 1.25000000, 1.37500000, 1.40625000, 1.54687500, 1.71875000, 1.75000000, 1.96875000; 1:   35/32   septimal neutral second           . .5.7. .  ; 2:    9/8    major whole tone                 1. . . .9.  ; 3:   77/64                                     . . .7. .11; 4:    5/4    major third                      1. .5. . .  ; 5:   11/8    undecimal semi-augmented fourth  1. . . . .11; 6:   45/32   tritone                           . .5. .9.  ; 7:   99/64                                     . . . .9.11; 8:   55/32                                     . .5. . .11; 9:    7/4    harmonic seventh                 1. . .7. .  ; 10:  63/32   octave - septimal comma           . . .7.9.  ; DEKANY 6 : 3,5,7,9,11;           0           1           2           3           4           5           6           7           8           9           10gidekany6 ftgen 6,0,16,-2, 1.00000000, 1.03125000, 1.09375000, 1.20312500, 1.31250000, 1.40625000, 1.54687500, 1.68750000, 1.71875000, 1.96875000, 1.87500000; 1:   33/32   undecimal comma                   .3. . . .11; 2:   35/32   septimal neutral second           . .5.7. .  ; 3:   77/64                                     . . .7. .11; 4:   21/16   narrow fourth                     .3. .7. .  ; 5:   45/32   tritone                           . .5. .9.  ; 6:   99/64                                     . . . .9.11; 7:   27/16   Pythagorean major sixth           .3. . .9.  ; 8:   55/32                                     . .5. . .11; 9:   15/8    classic major seventh             .3.5. . .  ; 10:  63/32   octave - septimal comma           . . .7.9.  ; DEKANY 7 : 1,5,7,11,15;           0           1           2           3           4           5           6           7           8           9           10gidekany7 ftgen 7,0,16,-2, 1.00000000, 1.09375000, 1.17187500, 1.20312500, 1.25000000, 1.28906250, 1.37500000, 1.64062500, 1.71875000, 1.75000000, 1.8750000; 1:   35/32   septimal neutral second           .5.7.  .    ; 2:   75/64   classic augmented second          .5. .  .15  ; 2:   77/64   Keemun minor third                . .7.11.    ; 4:    5/4    major third                      1.5. .  .    ; 5:	  165/128                                    . . .11.15; 6:	   11/8    undecimal semi-augmented fourth  1. . .11.  	; 7:	  105/64   septimal neutral sixth            . .7.  .15; 8:	   55/32                                     .5. .11.  ; 9:    7/4    harmonic seventh                 1. .7.  .    ; 10:  15/8    classic major seventh            1. . .  .15;;____________________________________________________________        instr 1; p3 = duration; p4 = amp in cpspch; p5 = amplitude; Peak amps of the partials are a function of the amp of the lowest; partialiamp = ampdb(p4)i1  = iampi2  = iamp*0.67i3  = iamp*1.35i4  = iamp*1.80i5  = iamp*2.67i6  = iamp*1.67i7  = iamp*1.46i8  = iamp*1.33i9  = iamp*1.33i10 = iamp*0.75i11 = iamp*1.33; Durations of the partials are a function of the duration of the; lowest partiali12 = p3i13 = p3*.9i14 = p3*.65i15 = p3*.55i16 = p3*.325i17 = p3*.35i18 = p3*.25i19 = p3*.2i20 = p3*.15i21 = p3*.1i22 = p3*.075; Frequencies of the partials are a function of the frequency of the; fundamentalipitch cps2pch p5, -(p6)i23 = ipitch*.56i24 = (ipitch*.56)+1i25 = ipitch*.92i26 = (ipitch*.92)+1.7i27 = ipitch*1.19i28 = ipitch*1.7i29 = ipitch*2i30 = ipitch*2.74i31 = ipitch*3i32 = ipitch*3.75i33 = ipitch*4.07; The instrument consists of pairs of oscil1/oscili where oscil1; provides the envelope of the partial and oscili the partial itselfk1 oscil1i 0,i1,i12,giampfna1 oscili k1,i23,gipartfnk2 oscil1i 0,i2,i13,giampfna2 oscili k2,i24,gipartfnk3 oscil1i 0,i3,i14,giampfna3 oscili k3,i25,gipartfnk4 oscil1i 0,i4,i15,giampfna4 oscili k4,i26,gipartfnk5 oscil1i 0,i5,i16,giampfna5 oscili k5,i27,gipartfnk6 oscil1i 0,i6,i17,giampfna6 oscili k6,i28,gipartfnk7 oscil1i 0,i7,i18,giampfna7 oscili k7,i29,gipartfnk8 oscil1i 0,i8,i19,giampfna8 oscili k8,i30,gipartfnk9 oscil1i 0,i9,i20,giampfna9 oscili k9,i31,gipartfnk10 oscil1i 0,i10,i21,giampfna10 oscili k10,i32,gipartfnk11 oscil1i 0,i11,i22,giampfna11 oscili k11,i33,gipartfnoutall a1+a2+a3+a4+a5+a6+a7+a8+a9+a10+a11endin;------------------------------------------------------------;;  From Temeperd Dekanies Â© 2001 - Greg Schiemer;------------------------------------------------------------instr   2ibend1	=       1.010101010     ; 100/99ibend2	=       1.010204082     ;  99/98ipitch = p5  itrans	= 		0.01ifreq1	cps2pch ipitch, -(p6)ifreq2	cps2pch itrans, -1ifreq	=       ifreq1 * ifreq2kfreq	=       ifreqkover	linseg  0, p3*0.05, ampdb(p4), p3*0.95, 0, 0.05, 0k0		linen 	kover, 	0.01, 	p3, 	p3*0.9k1		linen 	kover, 	0.02, 	p3, 	p3*0.8k2		linen 	kover, 	0.03, 	p3, 	p3*0.7k3		linen 	kover, 	0.04, 	p3, 	p3*0.6k4		linen 	kover, 	0.05, 	p3, 	p3*0.5k5		linseg 	ifreq, 	p3*0.5, (ifreq)*ibend1,     03*0.4, ifreqk6		linseg 	ifreq, 	p3*0.4, (ifreq)*ibend2,     p3*0.5, ifreqk7		linseg 	ifreq, 	p3*0.3, (ifreq)*(2-ibend1), p3*0.6, ifreqk8		linseg 	ifreq, 	p3*0.2, (ifreq)*(2-ibend2), p3*0.7, ifreqa0		oscil   k0, 	kfreqa1		oscil   k1, 	k5a2		oscil   k2, 	k6a3		oscil   k3, 	k7a4		oscil   k4, 	k8asigl	=       a0 + a1 + a4asigr	=       a0 + a2 + a3		outs    asigl, 	asigr		endininstr 3  if p5 == 1 then     iscorevent[] getrow gidarknotes, p4  else     iscorevent[] getrow gilightnotes, p4  endif     schedule iscorevent    endin